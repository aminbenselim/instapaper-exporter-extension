!function(e){function n(o){if(t[o])return t[o].exports;var r=t[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){e.exports=t(1)},function(e,n){"use strict";function t(e){var n=['<html><head>\n    <meta charset="utf-8">\n    <title>Instapaper Highlights Export</title>\n    <style type="text/css">\n      body {\n        max-width: 800px;\n        margin: 50px auto;\n        line-height: 1.4;\n      }\n      h1 {\n        margin: 50px 0 1em;\n      }\n      h2 {\n        font-size: 1em;\n        font-weight: normal;\n        margin: 3em 0 1em;\n      }\n      blockquote {\n        background: #FFFCEE;\n        padding: 15px;\n        margin: 0 0 10px;\n        display: block;\n        font-size: 1.2em;\n      }\n      code {\n        background: #F7F7F7;\n        padding: 10px;\n      }\n      .json-export {\n        width: 100%;\n        font-family: monospace;\n      }\n    </style>\n  </head><body>\n  <a href="#html">HTML</a> &bull; <a href="#json">JSON</a>\n  <hr />\n  Extension by Stian Haklev\n  <hr />\n  <h1 id="html">HTML Export</h1>'];e.forEach(function(e){var t='<h2><a href="'+e.source+'" class="title">'+e.title+'</a></h2>\n                <blockquote class="highlight">'+e.highlight+"</blockquote>";e.note&&(t+='<small class="note"><strong>Note:</strong> '+e.note+"</small>"),n.push(t)}),n.push('<h1 id="json">JSON Export</h1><textarea class="json-export" rows="10">'+JSON.stringify(e)+"</textarea>"),n.push("</body></html>");var t=new Blob(n,{type:"text/html"}),r=t.size+512,i="instapaper_highlights_export-"+Date.now()+".html",s=window.requestFileSystem||window.webkitRequestFileSystem;s(window.TEMPORARY,r,function(e){e.root.getFile(i,{create:!0},function(e){e.createWriter(function(e){e.onwriteend=o.bind(null,i),e.write(t)})})})}function o(e){var n="filesystem:chrome-extension://"+chrome.i18n.getMessage("@@extension_id")+"/temporary/"+e;chrome.downloads.download({filename:e,url:n,saveAs:!0})}function r(e){chrome.tabs.sendMessage(e.id,{message:"scrape_page"})}function i(e){chrome.tabs.query({active:!0,currentWindow:!0},function(e){var n=e[0];n.url.indexOf("instapaper.com/notes")>=0?r(n):chrome.tabs.create({url:"https://instapaper.com/notes"},s)})}function s(e){h=window.setInterval(function(){chrome.tabs.get(e.id,function(n){"complete"===n.status&&(r(e),window.clearInterval(h))})},100)}function a(e){"install"===e.reason&&chrome.tabs.create({url:"https://github.com/sawyerh/instapaper-exporter-extension/blob/master/README.md"})}function l(e,n,o){"save_highlights"===e.message&&t(e.highlights)}var h=void 0;chrome.browserAction.onClicked.addListener(i),chrome.runtime.onMessage.addListener(l),chrome.runtime.onInstalled&&chrome.runtime.onInstalled.addListener(a)}]);